<h1>Viggen Two Build Yocto release</h1>
<div id="mw-content-text" dir="ltr" class="mw-content-ltr" lang="en"><p><span style="font-size:16pt;">ViggenTwo - Yocto fsl-4.1.15-1.1.0 Jethro Build Yocto release</span></p></div>
<hr> <div id="toc" class="toc"><div id="toctitle"></div></div>
<h1><span class="toc" id="toctitle"> Contents</span></h1>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Installing_required_packages"><span class="tocnumber">1</span> <span class="toctext">Installing required packages</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Documentation"><span class="tocnumber">2</span> <span class="toctext">Documentation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Download_Yocto_Jethro_for_i.MX6UL_Bluewind_source"><span class="tocnumber">3</span> <span class="toctext">Download Yocto Jethro for i.MX6UL Bluewind source</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Setup_and_build_Yocto"><span class="tocnumber">4</span> <span class="toctext">Setup and build Yocto</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Setup_to_build_Yocto_X11"><span class="tocnumber">4.1</span> <span class="toctext">Setup to build Yocto X11</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Setup_to_build_Yocto_QT5"><span class="tocnumber">4.2</span> <span class="toctext">Setup to build Yocto QT5</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#local.conf_customizations"><span class="tocnumber">4.3</span> <span class="toctext">local.conf customizations</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Build_Results"><span class="tocnumber">4.4</span> <span class="toctext">Build Results</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Useful_Bitbake_commands"><span class="tocnumber">5</span> <span class="toctext">Useful Bitbake commands</span></a></li>
</ul>
<h1><span class="mw-headline" id="Installing_required_packages"><span class="mw-headline-number">1</span> Installing required packages<br></span></h1>
<p>
Follow the link below and install all required packages on your machine.
</p>
<p>
<a rel="nofollow" class="external text" href="http://www.yoctoproject.org/docs/latest/yocto-project-qs/yocto-project-qs.html">www.yoctoproject.org/docs/latest/yocto-project-qs/yocto-project-qs.html</a>
</p>
<p>
For example, if your building machine is an Ubuntu machine:
</p>
<pre>
sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib build-essential chrpath socat libsdl1.2-dev xterm lib32ncurses5-dev
</pre>
<p>
Bluewind Yocto build was tested with Ubuntu 15.10 only!
</p>
<h1><span class="mw-headline" id="Documentation"><span class="mw-headline-number">2</span> Documentation</span></h1>
<em>TBD: add reference to board ViggenTwo.</em>

<h1><span class="mw-headline" id="Download_Yocto_Jethro_for_i.MX6UL_Bluewind_source"><span class="mw-headline-number">3</span> Download Yocto Jethro for i.MX6UL Bluewind source</span></h1>
<pre>
git config --global user.name "Your Name"
git config --global user.email "Your Email"

mkdir ~/bin (this step may not be needed if the bin folder already exists)
curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo
chmod a+x ~/bin/repo
export PATH=~/bin:$PATH

mkdir bw-release-bsp
cd bw-release-bsp
repo init -u https://github.com/bluewind-embedded-systems/bw-arm-yocto-bsp.git -b imx-4.1.15-1.0.0_ga_viggentwo
repo sync
</pre>

<h1><span class="mw-headline" id="Setup_and_build_Yocto"><span class="mw-headline-number">4</span> Setup and build Yocto</span></h1>
<p>
You can create an image for X11 or create an image for QT5/Embedded. Please select one of the following option:
</p>
<ul>
<li>
<a href="#Setup_to_build_Yocto_X11" title="Setup to build Yocto X11"> X11</a>
</li>
<li>
<a href="#Setup_to_build_Yocto_QT5" title="Setup to build Yocto QT5"> QT/Embedded</a>
</li>
</ul>

<h2><span class="mw-headline" id="Setup_to_build_Yocto_X11"><span class="mw-headline-number">4.1</span> Setup to build Yocto X11</span></h2>
<p>
Setup the environment and use build_var folder<br>
<span style="color:red">Note: Run only once!</span>
</p>
<pre>
DISTRO=fsl-imx-x11 MACHINE=imx6ulviggentwo source fsl-setup-release.sh -b build-x11-viggentwo
bitbake fsl-image-gui 
</pre>
<div class="note note-info">Comment:<br>If you close your terminal and wish to build Yocto again, you should run (instead of fsl-setup-release.sh):<br></div>
<pre>
source setup-environment build-x11-viggentwo
bitbake fsl-image-gui
</pre>

<h2><span class="mw-headline" id="Setup_to_build_Yocto_QT5"><span class="mw-headline-number">4.2</span> Setup to build Yocto QT5</span></h2>
<p>
Use the folowing commands to build and test QT over frame buffer.<br>
Setup the environment and use build_var folder<br>
<span style="color:red">Note: Run only once!</span>
</p>
<pre>
DISTRO=fsl-imx-fb MACHINE=imx6ulviggentwo source fsl-setup-release.sh -b build-qt5-viggentwo
bitbake fsl-image-qt5
</pre>
<div class="note note-info">Comment:<br>If you close your terminal and wish to build Yocto again, you should do:<br></div>
<pre>
source setup-environment build-qt5-viggentwo
bitbake fsl-image-qt5
</pre>

<h2><span class="mw-headline" id="local.conf_customizations"><span class="mw-headline-number">4.3</span> local.conf customizations</span></h2>
<p>
Edit you local.conf file:
</p>
<pre>
gedit conf/local.conf
</pre>
<p>
Change parallel build and download directory.
Set the build parameters to fully utilize your host machine's resources<br>
<pre>
BB_NUMBER_THREADS = '4'
PARALLEL_MAKE = '-j 6'</pre>
BB_NUMBER_THREADS should be your host machine's number of threads minus 2 or same.<br>
PARALLEL_MAKE should be the number of threads your host machine has plus two.<br>
</p>
<p>
Change packages download directory. By default it is set to:<br>
<pre>
DL_DIR&nbsp;?= "${BSPDIR}/downloads/"
</pre>
change it to a global folder like<br>
<pre>
DL_DIR&nbsp;?= "/opt/yocto_dl/".
</pre>
Don't forget to create the folder and make it available without a sudo permissions.
</p>

<h2><span class="mw-headline" id="Build_Results"><span class="mw-headline-number">4.4</span> Build Results</span></h2>
<p>
The resulted images are located in tmp/deploy/images/imx6ulviggentwo/.<br>
Looking at tmp/deploy/images/imx6ulviggentwo/ you will find 6 main files that are linked to the actual file<br>
</p>
<table class="wikitable">

<tbody>
<tr>
<th scope="col"> Image Name<br></th>
<th scope="col"> How to use<br></th>
</tr>
<tr>
<td>fsl-image-gui-imx6ulviggentwo.ext4<br></td>
<td>Not in Use<br></td>
</tr>
<tr>
<td>fsl-image-gui-imx6ulviggentwo.sdcard</td>
<td>Not in Use<br></td>
</tr>
<tr>
<td>fsl-image-gui-imx6ulviggentwo.tar.bz2</td>
<td>Used to create an root file system on the host.</td>
</tr>
<tr>
<td>zImage</td>
<td>Linux kernel image</td>
</tr>
<tr>
<td> u-boot-emmc-2015.04-r0.img</td>
<td> u-boot built for eMMC boot.</td>
</tr>
<tr>
<th scope="col"> Device Tree Name<br></th>
<th scope="col"> Boot Device<br></th>
</tr>
<td>zImage-imx6ul-viggentwo.dtb</td>
<td>Devive tree with deafault setup of ViggenTwo eval board.</td>
</tr>
</tbody></table>

<h1><span class="mw-headline" id="Useful_Bitbake_commands"><span class="mw-headline-number">5</span> Useful Bitbake commands</span></h1>
<p><a rel="nofollow" class="external text" href="http://elinux.org/Bitbake_Cheat_Sheet">Bitbake Cheat Sheet</a></p>
<p><a rel="nofollow" class="external text" href="https://community.freescale.com/docs/DOC-94953">Useful bitbake commands</a></p>
<p><a rel="nofollow" class="external text" href="https://community.freescale.com/docs/DOC-94874">i.MX Yocto Project: ltib versus bitbake</a></p>
</body></html>
